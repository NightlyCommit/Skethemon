{% import _self as self %}

{% macro render(test) %}
    {% import _self as self %}

    {% if test.children %}
        {% for name, child in test.children %}
            {{ self.render(child) }}
        {% endfor %}
    {% else %}
        <div class="demo--test">
            <header>{{ test.title }}</header>
            <div class="demo--test--cases">
                {% for case in test.cases %}
                    <div class="demo--test--case">
                        <header>
                            {{ case.title }}
                        </header>
                        <div class="demo--test--case--content">
                            {{ include(test.template, case.data) }}
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    {% endif %}
{% endmacro %}

<!DOCTYPE html>
<html lang="{{ language|default('en') }}" dir="{{ direction|default('ltr') }}">
<head>
    <meta charset="UTF-8">
    <title>{{ title }}</title>
    <link rel="stylesheet" type="text/css" href="index.css?{{ timestamp }}">
</head>
<body class="demo">
<div class="demo--title">{{ title }}</div>
<div class="demo--content">
    {{ self.render(test) }}
</div>
<script type="text/javascript" src="index.js?{{ timestamp }}"></script>
</body>
</html>
